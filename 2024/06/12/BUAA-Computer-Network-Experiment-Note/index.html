<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="google-site-verification"
    content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI"
  />
  <meta name="baidu-site-verification" content="093lY4ziMu" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, user-scalable=no"
  />
  <meta name="description" content="A hexo theme" />
  <meta name="keyword" content="dusign, hexo-theme-snail" />
  <link rel="shortcut icon" href="/img/ironman-draw.png" />
  <link
    rel="stylesheet"
    href="https://unpkg.com/@waline/client@v3/dist/waline.css"
  />
  <link rel="stylesheet" href="/css/walineRoot.css" />
  <!-- Place this tag in your head or just before your close body tag. -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!--<link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>-->
  <title>
     [BUAA Computer Network Experiment] Notes - XoioiioX&#39;s Blog 
  </title>

  <link
    rel="canonical"
    href="https://xoioiiox.github.io/2024/06/12/BUAA-Computer-Network-Experiment-Note/"
  />

  <!-- Bootstrap Core CSS -->
  
<link rel="stylesheet" href="/css/bootstrap.min.css">


  <!-- Custom CSS -->
   
<link rel="stylesheet" href="/css/dusign-light.css">
 
<link rel="stylesheet" href="/css/dusign-common-light.css">
 
<link rel="stylesheet" href="/css/font-awesome.css">
 
<link rel="stylesheet" href="/css/toc.css">

  <!-- background effects end -->
  

  <!-- Pygments Highlight CSS -->
  
<link rel="stylesheet" href="/css/highlight.css">
 
<link rel="stylesheet" href="/css/widget.css">
 
<link rel="stylesheet" href="/css/rocket.css">

  
<link rel="stylesheet" href="/css/signature.css">
 
<link rel="stylesheet" href="/css/fonts.googleapis.css">


  <link
    rel="stylesheet"
    href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css"
  />

  <!-- photography -->
  
<link rel="stylesheet" href="/css/photography.css">


  <!-- ga & ba script hoook -->
  <script></script>
<meta name="generator" content="Hexo 4.2.1"></head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- background effects start -->
    
    <!-- background effects end -->

	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            
                background-image: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url('')
                /*post*/
            
        
    }
    
    #signature{
        background-image: url('/img/signature/dusign.png');
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#计算机网络" title="计算机网络">计算机网络</a>
                            
                        </div>
                        <h1>[BUAA Computer Network Experiment] Notes</h1>
                        <h2 class="subheading">计算机网络实验笔记</h2>
                        <span class="meta">
                            Posted by xoioiiox on
                            2024-06-12
                        </span>

                        
                            <div class="blank_box"></div>
                            <span class="meta">
                                Words <span class="post-count">7.7k</span> and
                                Reading Time <span class="post-count">28</span> Minutes
                            </span>
                            <div class="blank_box"></div>
                            <!-- 不蒜子统计 start -->
                            <span class="meta">
                                Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
                            </span>
                            <!-- 不蒜子统计 end -->
                        

                    </div>
                

                </div>
            </div>
        </div>      
    </div>

    
    <div class="waveWrapper">
        <div class="wave wave_before" style="background-image: url('/img/wave-light.png')"></div>
        <div class="wave wave_after" style="background-image: url('/img/wave-light.png')"></div>
    </div>
    
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">XoioiioX&#39;s Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/categories/">Categories</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                    
                    <li>
                        <a href="YOUR_CHINESE_BLOG_URL" target="_blank">Chinese Blog</a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    
<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div
        class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container"
      >
        <h4 id="实验一-网络实验入门"><a href="#实验一-网络实验入门" class="headerlink" title="实验一 网络实验入门"></a>实验一 网络实验入门</h4><h5 id="交换机和路由器简介"><a href="#交换机和路由器简介" class="headerlink" title="交换机和路由器简介"></a>交换机和路由器简介</h5><ul>
<li><p>交换机工作在数据链路层，基本功能是在多个计算机或者网段之间交换数据。</p>
</li>
<li><p>路由器工作在网络层，基本功能是根据数据包的IP地址选择发送路径，转发数据包到相应网络。</p>
</li>
</ul>
<h5 id="交换机和路由器的基本配置"><a href="#交换机和路由器的基本配置" class="headerlink" title="交换机和路由器的基本配置"></a>交换机和路由器的基本配置</h5><h5 id="地址转换NAT"><a href="#地址转换NAT" class="headerlink" title="地址转换NAT"></a>地址转换NAT</h5><p>配置地址转换，把所有内网地址转换成所配置的地址池中的地址</p>
<ul>
<li><p>定义访问控制列表，允许IP源地址为10.0.0.0/24的外出数据包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[R1] acl number 2001</span><br><span class="line">[R1-acl-2001] rule permit source 10.0.0.0 0.0.0.255</span><br><span class="line">[R1-acl-2001] rule deny source any</span><br></pre></td></tr></table></figure>
</li>
<li><p>定义一个包含5个公网地址的地址池，地址池名称为1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#v5</span><br><span class="line">[R1] nat address-group 1 192.168.5.105 192.168.5.109</span><br><span class="line">#v7</span><br><span class="line">[R1] nat address-group 1</span><br><span class="line">[R1-address-group-1] address 192.168.5.105 192.168.5.109</span><br></pre></td></tr></table></figure>
</li>
<li><p>将访问控制运用到地址池</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[R1] interface e0&#x2F;1</span><br><span class="line">[R1-Ethernet0&#x2F;1] nat outbound 2001 address-group 1</span><br></pre></td></tr></table></figure>
</li>
<li><p>在路由表中添加默认路由</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[R1] ip route-static 0.0.0.0 0.0.0.0 192.168.5.1</span><br></pre></td></tr></table></figure>
</li>
<li><p>与OSPF结合，还需引入默认路由</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[R1-ospf-1] default-route-advertise (cost 100)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="实验二-数据链路层实验"><a href="#实验二-数据链路层实验" class="headerlink" title="实验二 数据链路层实验"></a>实验二 数据链路层实验</h4><h5 id="以太网链路层帧格式分析"><a href="#以太网链路层帧格式分析" class="headerlink" title="以太网链路层帧格式分析"></a>以太网链路层帧格式分析</h5><h5 id="交换机的MAC地址表和端口聚合"><a href="#交换机的MAC地址表和端口聚合" class="headerlink" title="交换机的MAC地址表和端口聚合"></a>交换机的MAC地址表和端口聚合</h5><p>区分路由聚合，端口聚合是将交换机的多个物理端口在逻辑上进行绑定，形成一个具有较高带宽的通道。</p>
<p><img src="计网实验复习笔记.asset/image-20240519193708182.png" alt="image-20240519193708182" style="zoom:80%;" /></p>
<h5 id="VLAN的配置与分析"><a href="#VLAN的配置与分析" class="headerlink" title="VLAN的配置与分析"></a>VLAN的配置与分析</h5><p><strong><em>VLAN的产生</em></strong></p>
<p>为了减少在广播域中转发的报文，将大的广播域隔离成多个较小的广播域，于是出现了VLAN技术。在VLAN技术中，规定凡是具有VLAN功能的<strong>交换机</strong>在转发数据报文时，都需要确认该报文属于某一个VLAN，并且该报文只能被转发到属于同一VLAN的端口或主机，<strong>每个VLAN代表了一个广播域</strong>。（Virtual Local Area Network，虚拟局域网）</p>
<p><strong><em>VLAN端口的分类</em></strong></p>
<p>根据端口对VLAN数据帧的处理方式，将交换机的端口氛围Access, Trunk, Hybrid三类。</p>
<ul>
<li>Access端口一般指那些<strong>连接不支持VLAN技术的终端设备</strong>的端口，这些端口收到的数据帧都不包含VLAN标签，向外发送数据帧是，也必须保证数据帧中也不包含VLAN标签。一般接主机或路由器。</li>
<li>Trunk端口一般指那些<strong>连接支持VLAN技术的网络设备</strong>（如交换机）的端口，这些端口接收到的数据帧一般都包含VLAN标签，而向外发送数据帧时，必须保证接收端能够区分不同VLAN的数据帧，故常常需要添加VLAN标签。一般用于交换机之间的连接。</li>
<li>Hybrid端口属于Access和Trunk的<strong>混合模式</strong>，工作在该模式下的端口可以属于多个VLAN，可以接收和发送多个VLAN报文，可以用于交换机之间连接，也可以用于连接用户的计算机。</li>
</ul>
<p><strong><em>VLAN的配置</em></strong></p>
<ul>
<li><p>创建/删除VLAN</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[h3c] vlan 2</span><br><span class="line">[h3c] undo vlan 2</span><br></pre></td></tr></table></figure>
</li>
<li><p>向当前VLAN中添加/删除端口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[h3c-vlan2] port e 1&#x2F;0&#x2F;1</span><br><span class="line">[h3c-vlan2] undo port e 1&#x2F;0&#x2F;1</span><br></pre></td></tr></table></figure>
</li>
<li><p>指定端口类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[h3c-Ethernet 1&#x2F;0&#x2F;24] port link-type access | trunk | hybrid</span><br></pre></td></tr></table></figure>
</li>
<li><p>指定/删除端口的默认VLAN ID</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[h3c-Ethernet 1&#x2F;0&#x2F;1] port trunk pvid vlan 2</span><br><span class="line">[h3c-Ethernet 1&#x2F;0&#x2F;1] undo port hybrid pvid</span><br></pre></td></tr></table></figure>
</li>
<li><p>指定/删除Trunk端口可以通过的VLAN数据帧</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[h3c-Ethernet 1&#x2F;0&#x2F;24] port trunk permit vlan 2 to 3</span><br></pre></td></tr></table></figure>
</li>
<li><p>将Hybrid端口加入到指定的已经存在的VLAN，并标记为tagged或untagged</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[h3c-Ethernet 1&#x2F;0&#x2F;24] port hybrid vlan 30 40 untagged</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><em>实验要点</em></strong></p>
<ul>
<li>先配置基本VLAN，此时两台交换机上相同的VLAN内的主机还不能通信</li>
<li>配置交换机上的Trunk端口，并允许相应VLAN通过。此时配置为Trunk的接口标记为tagged，表示从该端口通过的报文要打上<code>IEEE 802.1q</code>标记，用于标记该报文所属的VLAN</li>
<li>这样，当对端交换机收到该报文时，根据tag标记来确定该报文属于哪个VLAN，从而只在该VLAN中广播或单播该报文</li>
</ul>
<h5 id="广域网数据链路层协议"><a href="#广域网数据链路层协议" class="headerlink" title="广域网数据链路层协议"></a>广域网数据链路层协议</h5><p>广域网链路层<code>PPP</code>的基本原理和基本配置</p>
<ul>
<li><p>配置PPP</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[R1] interface s 1&#x2F;0</span><br><span class="line">[R1-serial 1&#x2F;0] link-protocol ppp</span><br><span class="line"># 之后需要shutdown来重启生效</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置路由器上PPP的身份验证（PAP, CHAP）</p>
</li>
</ul>
<h4 id="实验三-网络层实验"><a href="#实验三-网络层实验" class="headerlink" title="实验三 网络层实验"></a>实验三 网络层实验</h4><h5 id="ARP分析"><a href="#ARP分析" class="headerlink" title="ARP分析"></a>ARP分析</h5><p>ARP(Address Resolution Protocol)是<strong>地址解析协议</strong>的简称。<strong>地址解析</strong>指的是建立硬件地址与IP地址的映射关系，将IP地址解析成硬件地址。主机存在<strong>ARP缓存</strong>，存放最近的IP地址与硬件地址的对应关系。如果找到相应项，便将报文直接发送出去，否则利用ARP进行解析。</p>
<ul>
<li><strong>相同网段：</strong>主机A发送ARP请求报文，主机B收到后，判断报文的目的IP是自己的后，便将自己的硬件地址写入应答报文，发给主机A。主机A收到后将其存入缓存，然后才将报文发往主机B</li>
<li><strong>不同网段：</strong>主机A将报文<strong>发给自己的默认网关</strong>，请求默认网关的硬件地址同相同网段上的方法。此后默认网关根据目的IP进行转发。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#清空arp缓存</span><br><span class="line">C:\&gt;arp -d</span><br><span class="line">#查看arp缓存</span><br><span class="line">C:\&gt;arp -a</span><br></pre></td></tr></table></figure>
<p><strong>默认网关：</strong>不同网段下的主机通信，必须经过网关的转发。默认网关的意思是一台主机如果找不到可用的网关，就把数据包发给默认指定的网关，由这个网关来处理数据包。</p>
<h5 id="ICMP分析"><a href="#ICMP分析" class="headerlink" title="ICMP分析"></a>ICMP分析</h5><p>ICMP(Internet Control Message Protocol)是<strong>因特网控制报文协议</strong>，允许路由器或主机报告差错情况和提供有关信息。ICMP报文将作为IP数据报的数据，封装在IP数据报中进行传输。可分为ICMP差错报告报文和ICMP询问报文。</p>
<p>目前网络中常见的基于ICMP的应用程序主要有ping和tracert命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#打开对tracert响应</span><br><span class="line">[S1] ip ttl-expires enable</span><br><span class="line">[S1] ip unreachables enable</span><br></pre></td></tr></table></figure>
<h5 id="IP分析"><a href="#IP分析" class="headerlink" title="IP分析"></a>IP分析</h5><p>数据报文在网络中的传输主要分为<strong>主机发送和路由器转发</strong>两种。</p>
<ul>
<li><strong>主机发送</strong>数据报的方式有<strong>直接交付和间接交付</strong>两种。<ul>
<li>主机将要发送数据报的目的地址同自己的子网掩码与操作，若结果等于其所在网络地址，则直接交付到本网络</li>
<li>否则发往下一跳路由器（一般为主机的默认网关）</li>
</ul>
</li>
<li><strong>路由器转发</strong>数据报的方法如下：<ul>
<li>先判断能否直接交付，不能则查找路由表</li>
<li>若表中无该目的地址，则通过’’与’’判断是否属于路由表中的网络</li>
<li>选择具有最长网络前缀的路由表项，将数据报传送给对应的下一跳路由器</li>
<li>否则报告转发分组出错</li>
</ul>
</li>
</ul>
<h5 id="网络层分片实验"><a href="#网络层分片实验" class="headerlink" title="网络层分片实验"></a>网络层分片实验</h5><p>由于存在MTU（最大传输单元），有时我们需要将报文分成几片分别传输。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#设置路由器端口MTU</span><br><span class="line">[H3C-Ethernet0&#x2F;0] mtu 100</span><br><span class="line">#设置ping命令数据部分大小</span><br><span class="line">[H3C-Ethernet0&#x2F;0] ping -s 300 192.192.169.21</span><br></pre></td></tr></table></figure>
<h5 id="VLAN间通信"><a href="#VLAN间通信" class="headerlink" title="VLAN间通信"></a>VLAN间通信</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 清空交换机MAC地址表</span><br><span class="line">[S1] undo mac-address</span><br><span class="line"># 清空三层交换机S1的ARP缓存</span><br><span class="line">&lt;S1&gt; reset arp all</span><br><span class="line"># 清空计算机的ARP缓存</span><br><span class="line">arp -d</span><br></pre></td></tr></table></figure>
<font color=Red>三层交换机与两层交换机的区别???</font>

<h4 id="实验四-RIP协议实验"><a href="#实验四-RIP协议实验" class="headerlink" title="实验四 RIP协议实验"></a>实验四 RIP协议实验</h4><h4 id="实验五-OSPF协议分析"><a href="#实验五-OSPF协议分析" class="headerlink" title="实验五 OSPF协议分析"></a>实验五 OSPF协议分析</h4><h5 id="OSPF协议概述及基本配置"><a href="#OSPF协议概述及基本配置" class="headerlink" title="OSPF协议概述及基本配置"></a>OSPF协议概述及基本配置</h5><p><strong><em>OSPF协议概述</em></strong></p>
<p>OSPF协议是一个<strong>基于链路状态算法</strong>的内部网关协议，OSPF是<strong>开放最短路由优先</strong>(Open Shortest Path First)的缩写。其核心思想是，每一台路由器将其周边的链路状态（包括接口的直连网段、相连的路由器等信息）描述出来，发送给网络中相邻的路由器。经过一段时间的链路状态信息交互，每台路由器都保存了一个<strong>链路状态数据库LSDB</strong>，该数据库是整个网络完整的链路状态描述，在此基础上，应用shortest path first算法就可以计算路由。</p>
<ol>
<li><p><strong>自治系统和区域</strong></p>
<p><strong>自治系统</strong>(Autonomy System)是指由同一机构管理，使用<strong>同一组选路策略</strong>的路由器的集合。它最主要的特点是有权自主地决定在<strong>本系统内采用何种路由选择协议</strong>。</p>
<p><strong>区域</strong>(Area)指的是一个路由器的集合，相同区域有着相同的拓扑结构数据库。OSPF用区域把一个AS划分成多个链路状态域。区域ID用一个32位整数标识。</p>
</li>
<li><p><strong>OSPF的邻居和邻接概念</strong></p>
<p>OSPF路由器启动后，便会通过OSPF接口向外发送hello报文。收到hello报文的OSPF路由器会检查报文中定义的一些参数，如果双方一直就会形成<strong>邻居关系</strong>。但只有当双方成功交换链路状态通告信息，才形成<strong>邻接关系</strong>。</p>
</li>
</ol>
<p><strong><em>OSPF基本配置</em></strong></p>
<ol>
<li><p><strong>配置router id</strong></p>
<p>如果没有人为指定，路由器会<strong>自动选择</strong>一个接口的IP地址为router id。一般优先选择路由器<strong>回环接口(Loopback)中最大IP地址</strong>，如果没有配置Loopback接口，就选取<strong>物理接口中最大的IP地址</strong>。如果一台路由器的router id在运行中被改变，则<strong>必须重启OSPF协议</strong>或重启路由器才能使其生效。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">system-view</span><br><span class="line">router id (router-id)</span><br><span class="line">undo router id</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>启动OSPF</strong></p>
<p>OSPF支持多进程，一台路由器上的多个进程由<strong>进程号</strong>区分。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ospf [process-id [[router-id router-id] vpn-instance vpn-instance-name]]</span><br><span class="line">undo ospf [process-id]</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>进入OSPF区域视图</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">area (area-id)</span><br><span class="line">undo area (area-id)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>在指定网段使能OSPF</strong></p>
<p>启动OSPF后还必须<strong>指定在某个网段上</strong>应用OSPF</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">network (ip-address) (wildcard-mask)</span><br><span class="line">undo network (ip-address) (wildcard-mask)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><strong><em>OSPF相关命令</em></strong></p>
<p><img src="计网实验复习笔记.asset/image-20240510094138886.png" alt="image-20240510094138886"></p>
<h5 id="OSPF协议报文交互过程"><a href="#OSPF协议报文交互过程" class="headerlink" title="OSPF协议报文交互过程"></a>OSPF协议报文交互过程</h5><p><strong><em>OSPF协议报文结构</em></strong></p>
<ol>
<li><p>OSPF报文头</p>
</li>
<li><p>OSPF协议的可靠传输机制</p>
<p>OSPF协议基于IP，IP无法提供可靠传输，所以OSPF协议采用了确认和重传机制。</p>
</li>
<li><p>OSPF的5种报文类型</p>
<ol>
<li><strong>Hello报文</strong>(Hello Packet)：<strong>周期性地发送</strong>给本路由器的邻居</li>
<li><strong>DD报文</strong>(Database Description Packet)：用于<strong>交换邻居路由器之间链路状态数据库的摘要信息</strong>。分为<strong>空DD报文和带有摘要信息的DD报文</strong>两种，开始时，两个邻居路由器互相发送空DD报文，用来确定<strong>主从关系</strong>，之后才发送带有摘要信息的DD报文。</li>
<li><strong>LSR报文</strong>(Link State Request Packet)：交换了DD报文后，通过比较能够确认本地链路状态数据库缺少的LSA和需要更新的LSA，需要发送LSR报文<strong>向对方请求所需要LSA</strong>，报文内容包括所需要的<strong>LSA的摘要</strong>。</li>
<li><strong>LSU报文</strong>(Link State Update Packet)：用来向发送LSR报文的路由器<strong>发送其所需要的LSA</strong>，报文内容是多条LSA的集合。</li>
<li><strong>LSAck报文</strong>(Link State Acknowledgement Packet)：用来对接收到的LSU报文进<strong>行确认</strong>，报文内容是需要确认的LSA的首部。</li>
</ol>
<p>注：LSA为链路状态通告(Link State Advertise)</p>
</li>
</ol>
<p><strong><em>邻居状态机</em></strong></p>
<p><img src="计网实验复习笔记.asset/image-20240510100959852.png" alt="image-20240510100959852"></p>
<p><strong><em>OSPF报文交互过程</em></strong></p>
<ol>
<li>Hello报文发现邻居</li>
<li>DD报文的主从关系协商（router id较大的成为主）</li>
<li>DD报文交换</li>
<li>LSA请求</li>
<li>LSA更新</li>
<li>LSA应答</li>
</ol>
<p><img src="计网实验复习笔记.asset/image-20240510102333316.png" alt="image-20240510102333316"></p>
<h5 id="OSPF协议链路状态描述"><a href="#OSPF协议链路状态描述" class="headerlink" title="OSPF协议链路状态描述"></a>OSPF协议链路状态描述</h5><p><strong><em>OSPF协议的4种网络类型</em></strong></p>
<ul>
<li>广播类型：在该类型的网络中，通常以组播形式发送协议报文，选举指定路由器DR和备份指定路由器BDR</li>
<li>NBMA类型：全连接的非广播多点可达网络NBMA(Non-Broadcast Multi-Access)。以单播形式发送协议报文。手工指定邻居，选举DR和BDR，DR和BDR要求与DRother完全直连</li>
<li>点到多点PTMP类型：以组播形式发送协议报文。组播Hello报文自动发现邻居，不要求DR/BDR选举</li>
<li>点到点PTP类型：以组播形式发送协议报文，无需选举DR/BDR</li>
</ul>
<p><strong><em>链路状态描述</em></strong></p>
<p>OSPF协议将路由器周边的网络拓扑结构抽象为4种典型的网络模型，分别为<strong>Stub net、PPP网络、点到多点网络、全连接网络</strong>。对每种类型网络的链路状态描述都可以分为两部分，分别是对<strong>相连网段</strong>的描述和对<strong>相连路由器</strong>的描述。每部分都包括link id, data, type, metric四部分。</p>
<p><img src="计网实验复习笔记.asset/image-20240510160738227.png" alt="image-20240510160738227"></p>
<ul>
<li>Stub net网络描述<ul>
<li>是指所连接的一个末端网络，该网段没有其他运行OSPF协议的网络设备，只有如计算机这样的设备</li>
</ul>
</li>
<li>PPP网络描述<ul>
<li>是指通过一条<strong>点到点</strong>的链路<strong>连接另外一台</strong>运行OSPF的路由器</li>
</ul>
</li>
<li>点到多点网络描述<ul>
<li>是指通过一个<strong>点对多点</strong>的网络<strong>连接另外多台</strong>运行OSPF的路由器，但这些路由器彼此之间并<strong>不是全连通</strong>的</li>
</ul>
</li>
<li>全连接网络描述<ul>
<li>全连接的网络用第二类LSA描述，其他类型网络用第一类</li>
</ul>
</li>
</ul>
<p><strong><em>指定路由器DR的选举与第二类LSA</em></strong></p>
<ol>
<li><p><strong>指定路由器DR和备份指定路由器BDR</strong></p>
<p>为了解决全连接网络中N^2连接问题，OSPF协议从该网络中自动选举一台路由器为指定路由器DR，DR路由器负责传递信息。所有路由器都<strong>只将路由信息发送给DR</strong>，再由DR将路由信息发送给本网段内的其他路由器。</p>
<p>考虑到DR可能失效，为缩短重新选举时间，OSPF提出备份制定路由BDR的方式，他<strong>和DR同时选举出来</strong>，也与该网段内的所有路由器建立邻接关系并交换路由信息。</p>
<p>这样DRother之间不在建立邻接关系，也不再交换路由信息，只是周期性交换hello报文，邻居状态机停留在<strong>2-way阶段</strong>。</p>
</li>
<li><p><strong>DR和BDR的选举过程</strong></p>
<p>//todo</p>
</li>
<li><p><strong>全连接网络描述</strong></p>
<p>全连接网络是指一个广播或者NBMA网段，该网段中所有运行OSPF协议的网络设备之间都直接相连。</p>
<p><img src="计网实验复习笔记.asset/image-20240514135124144.png" alt="image-20240514135124144"></p>
</li>
</ol>
<p><strong><em>链路状态通告LSA的结构</em></strong></p>
<p>//todo</p>
<p><strong><em>实验要点</em></strong></p>
<ul>
<li><p>显示LSA信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[R2] display ospf lsdb</span><br></pre></td></tr></table></figure>
</li>
<li><p>在路由器上显示第二类LSA信息的命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[R2] display ospf lsdb network</span><br></pre></td></tr></table></figure>
</li>
<li><p>重启OSPF进程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reset ospf process</span><br></pre></td></tr></table></figure>
</li>
<li><p>显示OSPF调试信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;R1&gt; debugging ospf event</span><br><span class="line">&lt;R1&gt; terminal debugging</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="区域划分及LSA种类"><a href="#区域划分及LSA种类" class="headerlink" title="区域划分及LSA种类"></a>区域划分及LSA种类</h5><p><strong><em>OSPF协议的区域划分</em></strong></p>
<p>随着网络规模扩大，LSA(链路状态通告)的集合组成的链路状态数据库(LSDB)会非常庞大，OSPF协议通过划分区域的方式解决。</p>
<p>区域的边界是路由器，这样<strong>会有一些路由器同时属于不同区域</strong>（ABR，区域边界路由器），但一个网段只能属于一个区域，每个运行OSPF协议的<strong>接口必须明确属于某一个特定的区域</strong>。</p>
<p>划分区域后，区域内部仍使用第一类和第二类LSA描述区域内网络，并仅限在区域内传播。区域边界路由器收到后，会生成第三类LSA，并传播到相邻的区域。</p>
<p><strong><em>OSPF与自治系统外部通信</em></strong></p>
<p>//</p>
<p><strong><em>LSA种类</em></strong></p>
<p><img src="计网实验复习笔记.asset/image-20240514141628283.png" alt="image-20240514141628283"></p>
<p><strong><em>骨干区域与虚连接</em></strong></p>
<p>Area 0被称为骨干区域</p>
<h5 id="OSPF协议路由的计算"><a href="#OSPF协议路由的计算" class="headerlink" title="OSPF协议路由的计算"></a>OSPF协议路由的计算</h5><p><strong>6.3.1 SPF算法和Cost值</strong></p>
<ol>
<li><p>SPF算法</p>
<p>SPF算法有时也称为Dijkstra算法，每个路由器根据其上某区域的LSDB，计算出该区域的拓扑结构图，也就是一个加权有向图。SPF算法基于此图，以该路由器为根，计算得到最小生成树，进而获得到每一个目的网段的路由。</p>
</li>
<li><p>Cost值</p>
<p>每一个启动了OSPF的链路都定义了一个Cost值。值越小说明带宽越高，优先级越高。</p>
</li>
</ol>
<p><strong>6.3.2 区域内OSPF路由的计算过程</strong></p>
<p><img src="计网实验复习笔记.asset/image-20240514142602958.png" alt="image-20240514142602958" style="zoom: 67%;" /></p>
<p><strong>6.3.3  区域间OSPF路由的计算</strong></p>
<ol>
<li>只有同一个区域内的路由器保持LSDB同步</li>
<li>区域间路由计算通过ABR完成。查询路由表，为每一条OSPF路由生成一条type 3的LSA，发送到另一个区域</li>
<li>另一个区域内的路由器根据这些LSA生成路由</li>
</ol>
<p><strong>6.3.4 区域外OSPF路由的计算</strong></p>
<p><strong>6.3.5 OSPF路由的类型和优选顺序</strong></p>
<h5 id="实验要点"><a href="#实验要点" class="headerlink" title="实验要点"></a>实验要点</h5><ul>
<li><p>在接口上配置Cost的命令</p>
<ul>
<li>对于一条线路，两端接口均要进行cost配置</li>
</ul>
<p><img src="计网实验复习笔记.asset/image-20240514143530064.png" alt="image-20240514143530064" style="zoom: 80%;" /></p>
</li>
<li><p>验证路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[R1] tracert 10.1.1.2</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="实验六-BGP协议实验"><a href="#实验六-BGP协议实验" class="headerlink" title="实验六 BGP协议实验"></a>实验六 BGP协议实验</h4><h5 id="BGP的基本分析"><a href="#BGP的基本分析" class="headerlink" title="BGP的基本分析"></a>BGP的基本分析</h5><p>BGP的基本功能是在自治系统间自动交换无环路的路由信息</p>
<p><strong>2.3.3 BGP的工作机制</strong></p>
<p>发送BGP报文的路由器称为BGP<strong>发言人</strong>(Speaker)，与他交换路由信息的其他BGP发言人称为<strong>对等体</strong>(Peer)，若干相关对等体可以构成<strong>对等体组</strong>(Group)。BGP发言人不断接收或产生新路由信息，并将它<strong>通告</strong>(Advertise)给其他BGP发言人。</p>
<p>对于一个自治系统边界路由器(ASBR)，路由的来源有两种，BGP发送优选的BGP路由和引入的IGP路由给对等体：</p>
<ul>
<li><strong>对等体接收</strong>：根据其属性进行过滤，根据规则选择最好的路由加入IP路由表</li>
<li><strong>IGP引入</strong>：要经过引入策略的过滤</li>
</ul>
<p>BGP在路由器上以EBGP和IBGP两种方式运行：</p>
<ul>
<li><strong>EBGP</strong>：属于不同AS的交换报文</li>
<li><strong>IBGP</strong>：对等体属于同一个AS，IBGP对等体之间不一定是物理直连，但要保证能够建立TCP连接</li>
</ul>
<p><strong>2.3.4 BGP路由通告原则</strong></p>
<ol>
<li>到达同一目的网络存在多条路径时，选择最优的</li>
<li>只把自己使用的路由通告给对等体</li>
<li>从EBGP获得的路由向所有BGP对等体通告</li>
<li>从IBGP获得的路由不会向IBGP对等体通告</li>
<li>从IBGP获得的路由是否通告给EBGP对等体要根据IGP和BGP<strong>同步情况</strong>决定</li>
<li>连接建立，发言人立即将自己所有BGP路由通告给新对等体</li>
</ol>
<p><strong>2.3.5 如何成为BGP路由</strong></p>
<p>BGP的主要工作是在AS间传递路由，而不是发现和计算路由。后者有IGP(OSPF)完成。BGP的路由信息需要通过配置命令的方式注入BGP中。</p>
<ul>
<li>纯动态注入：路由器将通过IGP获得的路由信息直接注入BGP，不进行过滤和选择</li>
<li>半动态注入：路由器有选择地将IGP发现的路由信息注入BGP</li>
<li>静态注入：路由器将静态配置的某条路由注入BGP</li>
</ul>
<p><strong>2.3.6 BGP的报文结构</strong></p>
<p>OPEN报文用于建立邻居关系，其他对等体收到后，立即以KEEPALIVE报文作响应。握手成功后，BGP邻居可以进行UPDATE, KEEPALIVE以及NOTIFICATION等报文的交互操作。</p>
<ul>
<li><strong>OPEN</strong><ul>
<li>对等体间通过发送OPEN报文交换各自版本、AS号等信息，<strong>进行协商</strong></li>
</ul>
</li>
<li><strong>UPDATE</strong><ul>
<li>UPDATE报文携带<strong>路由更新信息</strong>，包括撤销路由信息和可达路由信息及其路径属性</li>
<li>最多由三部分组成：<ul>
<li>不可达路由</li>
<li>路径属性</li>
<li>网络可达性信息</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>NOTIFICATION</strong></p>
<ul>
<li>检测到差错时，发送NOTIFICATION报文，<strong>关闭同对等体的连接</strong></li>
</ul>
</li>
<li><p><strong>KEEPALIVE</strong></p>
<ul>
<li>在BGP对等体间周期性地发送，以<strong>确保连接保持有效</strong></li>
</ul>
</li>
</ul>
<p><strong>实验要点</strong></p>
<ul>
<li><p>启动BGP，加入对等体</p>
<ul>
<li><strong>对于IBGP需要强制下一跳为</strong></li>
</ul>
<p><img src="计网实验复习笔记.asset/image-20240514151027648.png" alt="image-20240514151027648"></p>
</li>
<li><p>注入路由信息</p>
<p><img src="计网实验复习笔记.asset/image-20240514151139557.png" alt="image-20240514151139557"></p>
</li>
<li><p>指定源地址的ping操作</p>
<p><img src="计网实验复习笔记.asset/image-20240514151212655.png" alt="image-20240514151212655"></p>
</li>
<li><p>取消BGP协议配置</p>
<ul>
<li>undo bgp</li>
</ul>
</li>
</ul>
<h5 id="BGP状态机的分析"><a href="#BGP状态机的分析" class="headerlink" title="BGP状态机的分析"></a>BGP状态机的分析</h5><p><img src="计网实验复习笔记.asset/image-20240514151506991.png" alt="image-20240514151506991" style="zoom:80%;" /></p>
<ul>
<li><p>获取debug信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;R1&gt; debug bgp event</span><br><span class="line">&lt;R1&gt; terminal debugging</span><br><span class="line">&lt;R1&gt; reset bgp all</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="BGP的路由聚合"><a href="#BGP的路由聚合" class="headerlink" title="BGP的路由聚合"></a>BGP的路由聚合</h5><p>路由聚合使得路由表中一个项目能够表示多个传统分类地址的路由，减少维护数目。</p>
<p><img src="计网实验复习笔记.asset/image-20240514151855214.png" alt="image-20240514151855214"></p>
<p><img src="计网实验复习笔记.asset/image-20240514151904328.png" alt="image-20240514151904328" style="zoom:80%;" /></p>
<h5 id="BGP的基本路由属性分析"><a href="#BGP的基本路由属性分析" class="headerlink" title="BGP的基本路由属性分析"></a>BGP的基本路由属性分析</h5><p><strong>5.3.2 常见的BGP路由属性</strong></p>
<ul>
<li>origin：<ul>
<li>0： IGP</li>
<li>1： EGP</li>
<li>2： 其他</li>
<li><img src="计网实验复习笔记.asset/image-20240516194516120.png" alt="image-20240516194516120" style="zoom:80%;" /></li>
</ul>
</li>
<li>as-path：<ul>
<li>避免环路</li>
<li>影响路径选择</li>
</ul>
</li>
<li><strong>next-hop：</strong><ul>
<li>BGP向IBGP通告从其他EBGP获得的路由时，不改变下一跳属性</li>
<li>BGP向EBGP通告路由时，下一跳是本地BGP与对端连接的端口地址</li>
<li>对于可以多路访问的网络</li>
</ul>
</li>
<li>MED：<ul>
<li>用于向外部邻居路由器指示进入某个具有多个入口的AS的优先路径，MED较小的优先</li>
</ul>
</li>
<li>local-preference（本地优先级）：<ul>
<li>用于帮助AS内部的路由器选择到外部的较好出口，值越大优先级越高</li>
</ul>
</li>
</ul>
<p><strong>5.5 实验要点</strong></p>
<ul>
<li><p>引入路由</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import-route protocol [ process-id ] [ med med | route-policy route-policy-name ]</span><br><span class="line">undo import-route protocol [ process-id ]</span><br><span class="line">#例如，引入直连路由</span><br><span class="line">[s1-bgp] import-route direct</span><br></pre></td></tr></table></figure>
</li>
<li><p>显示bgp路由表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[s1-bgp] display bgp routing-table</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="BGP的路由策略"><a href="#BGP的路由策略" class="headerlink" title="BGP的路由策略"></a>BGP的路由策略</h5><p>BGP是在自治系统之间交换路由信息的，由于各种原因，BGP需要对发送和接收的路由信息进行<strong>过滤</strong>，也就是<strong>实施路由策略</strong>。路由策略是提供给路由协议<strong>实现信息过滤</strong>的手段。</p>
<ul>
<li>路由协议在与对端路由器进行路由信息交换时，可能需要只接收或发布一部分满足给定条件的路由信息。</li>
<li>路由协议（如OSPF）在引入其他路由协议（如BGP）的路由信息时，可能需要只引入一部分满足条件的路由信息，并对所引入的路由信息的某些属性进行设定以满足本协议的要求。</li>
</ul>
<p>路由策略一般由一系列的规则组成，这些规则大体上分为3类，分别作用于：路由发布、路由接收和路由引入。与路由策略相关的过滤器通常有：</p>
<ul>
<li><p><strong>访问控制列表（ACL）</strong>：</p>
<ul>
<li><p>定义路由器过滤数据包的规则</p>
</li>
<li><p>是由permit | deny语句组成的<strong>有顺序</strong>规则</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查看规则</span><br><span class="line">display acl</span><br></pre></td></tr></table></figure>
</li>
<li><p><img src="计网实验复习笔记.asset/image-20240514185020245.png" alt="image-20240514185020245" style="zoom:80%;" /></p>
</li>
</ul>
</li>
<li><p><strong>自治系统路径信息访问列表（AS-Path List）</strong>：</p>
<ul>
<li>指定BGP从对等体输入或向对等体输出路由信息时，过滤含有指定AS路径属性的路由</li>
</ul>
</li>
<li><p><img src="计网实验复习笔记.asset/image-20240514184132296.png" alt="image-20240514184132296" style="zoom:80%;" /></p>
</li>
<li><p><img src="计网实验复习笔记.asset/image-20240514184844264.png" alt="image-20240514184844264" style="zoom:80%;" /></p>
<ul>
<li><p><strong>路由策略：</strong></p>
<ul>
<li>每个路由策略可以有若干规则，用节点号标识。按节点号从小到大的顺序进行匹配，遇到第一个匹配的规则，就完成此次路由策略过程。</li>
<li><img src="计网实验复习笔记.asset/image-20240514184431671.png" alt="image-20240514184431671" style="zoom:80%;" /></li>
<li>复位BGP： reset bgp {all | peer-id}</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>6.4 实验要点</strong></p>
<ul>
<li>配置<strong>基于ACL</strong>的路由过滤<ul>
<li><img src="计网实验复习笔记.asset/image-20240514184725031.png" alt="image-20240514184725031" style="zoom:80%;" /></li>
</ul>
</li>
<li>配置<strong>基于As-Path</strong>的路由过滤<ul>
<li><img src="计网实验复习笔记.asset/image-20240514185240957.png" alt="image-20240514185240957" style="zoom:80%;" /></li>
</ul>
</li>
<li>配置<strong>基于Route Policy</strong>的路由过滤<ul>
<li><img src="计网实验复习笔记.asset/image-20240514185617504.png" alt="image-20240514185617504" style="zoom:80%;" /></li>
</ul>
</li>
</ul>
<h5 id="BGP的同步机制"><a href="#BGP的同步机制" class="headerlink" title="BGP的同步机制"></a>BGP的同步机制</h5><p>BGP规定：一个BGP路由器不能将从IBGP对等体得知的路由信息通告给EBGP，除非该路由信息也能通过IGP得知，这就是<strong>同步机制</strong>。同步机制避免了通告路由但实际不可达的情况。</p>
<p><strong>解决方式</strong>：</p>
<ol>
<li><p>把从外部得到的BGP路由引入IGP中</p>
</li>
<li><p>在AS内相应路由器上配置静态路由</p>
</li>
</ol>
<p><em>注意下一跳中的端口地址是对等体的端口，而不是自己的端口</em></p>
<h4 id="实验七-传输层实验"><a href="#实验七-传输层实验" class="headerlink" title="实验七 传输层实验"></a>实验七 传输层实验</h4><p>主要有TCP和UDP两种传输协议。</p>
<h5 id="TCP基本分析"><a href="#TCP基本分析" class="headerlink" title="TCP基本分析"></a>TCP基本分析</h5><ul>
<li>TCP(Transfer Control Protocol)是传输控制协议的简称。TCP工作在网络层协议之上，是一个<strong>面向连接的、端到端的、可靠的</strong>传输层协议。</li>
<li>TCP采用运输连接的方式传送TCP报文，包括连接建立、数据传送和连接释放三个阶段。</li>
</ul>
<p><strong><em>1. TCP连接的建立</em></strong></p>
<p>采用3次握手方式（A主动打开，B被动打开）：</p>
<ul>
<li>主机A向主机B发出连接请求报文段，<strong>SYN置1</strong>，选择一个序号x（表明在之后传送数据时第一个数据字节的序号为x+1）</li>
<li>主机B收到连接请求报文后，若同意，则发回确认。<strong>SYN和ACK都置1</strong>，确认号为x+1，为自己选择一个序号y</li>
<li>最后主机A收到B的确认后，要向B给出确认，<strong>ACK置1</strong>，确认号为y+1，自己的序号为x+1</li>
</ul>
<p><strong><em>2. TCP数据的传送</em></strong></p>
<p>为保证TCP传输可靠性，采用<strong>面向字节</strong>的方式，每个字节对应一个序号。<strong>序号字段</strong>可以确认发送方传送数据的每一个字节的序号，<strong>确认号字段</strong>则表示接收方在此之前的数据字节均已收到。这样几做到了可靠传输，又做到了全双工通信。</p>
<p><strong><em>3. TCP连接的释放</em></strong></p>
<p>TCP连接的释放采用4次握手方式：</p>
<ul>
<li>主机A向主机B发出释放请求，且不再发送数据，<strong>FIN置1</strong>，其序号x等于前面已传过的数据的最后一个字节的序号加1(x+1)</li>
<li>主机B收到后发出确认，序号为y，确认号为x+1，同时通知高层应用进程。此时A到B的连接已释放，相当于“A没有数据发送了，但仍接收B发送的数据”</li>
<li>若主机B不再向主机A发送数据，则终止比特<strong>FIN和确认比特ACK置1</strong>，并使序号仍为y，重复上次发过的ACK=x+1</li>
<li>主机A需要发出确认，<strong>ACK置1</strong>，ACK=y+1，序号为x+1</li>
</ul>
<h5 id="TCP的拥塞控制"><a href="#TCP的拥塞控制" class="headerlink" title="TCP的拥塞控制"></a>TCP的拥塞控制</h5><p><strong><em>TCP的滑动窗口机制</em></strong></p>
<p>TCP采用大小可变的滑动窗口进行流量控制。</p>
<p>发送端设置的当前能够发送的数据量大小叫做<strong>发送窗口</strong>，上限值为cwnd和rwnd的较小值。</p>
<ul>
<li><p><strong>发送窗口</strong>在连接建立时由双方商定，但接收端可根据自己的接收缓存的大小，动态调整发送端的发送窗口的上限值。这就是<strong>接收端窗口</strong>rwnd，被放在接收端发送的<strong>TCP报文段首部的窗口字段</strong>中。</p>
</li>
<li><p>同时，发送端根据其对当前网络拥塞程度的估计而确定的窗口值，叫做<strong>拥塞窗口</strong>cwnd，其大小与网络的带宽和时延密切相关。</p>
</li>
</ul>
<p><em>窗口合拢、窗口张开、窗口收缩</em></p>
<p><strong><em>TCP的慢启动和拥塞避免</em></strong></p>
<p>慢启动和拥塞避免分别是<strong>指数增长和线性增长</strong></p>
<p>设置慢启动门限ssthresh(slow start thresh)，超过门限则使用拥塞避免算法，否则为慢启动</p>
<p><strong><em>网络拥塞的处理</em></strong></p>
<p>网络拥塞是指发送端没有按时收到确认报文或者收到了重复的确认报文。发送端发现网络拥塞，重新设置慢启动门限：ssthresh=max(cwnd/2, 2*MSS(报文段最大长度))，以及cwnd=1</p>
<p><strong><em>TCP的超时与重传</em></strong></p>
<p>超时重传时间应略大于平均往返时延RTT</p>
<p><strong><em>TCP的窗口探查技术</em></strong></p>
<p>当接收端缓存已满，则向发送端发送一个窗口为0的通告报文。发送端收到后，停止发送报文，等待新的窗口通告。为了避免出现死锁，发送方使用一个坚持定时器<strong>周期性向接收方查询</strong>，以便发现窗口是否增大。</p>
<p><strong><em>TCP的快重传和快恢复</em></strong></p>
<p><strong><em>实验要点</em></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 在路由器上配置端口转发速率为10Mbps</span><br><span class="line">[R1]interface e0&#x2F;0</span><br><span class="line">[R1-Ethernet0&#x2F;0]qos lr outbound cir 10000</span><br></pre></td></tr></table></figure>
<h5 id="UDP分析"><a href="#UDP分析" class="headerlink" title="UDP分析"></a>UDP分析</h5><p>UDP(User Datagram Protocol)主要用来支持在计算机之间传输数据的网络应用，UDP报文封装在IP报文中传输。UDP是不可靠的，在传输数据之前不建立连接，传输过程中没有报文确认信息。</p>
<h4 id="实验七-应用层实验"><a href="#实验七-应用层实验" class="headerlink" title="实验七 应用层实验"></a>实验七 应用层实验</h4><h5 id="DNS协议分析"><a href="#DNS协议分析" class="headerlink" title="DNS协议分析"></a>DNS协议分析</h5><p>DNS是域名系统(Domain Name System)的缩写，主要用来将主机名和电子邮件目标地址映射成IP地址。</p>
<h5 id="HTTP分析"><a href="#HTTP分析" class="headerlink" title="HTTP分析"></a>HTTP分析</h5><h5 id="SMTP分析"><a href="#SMTP分析" class="headerlink" title="SMTP分析"></a>SMTP分析</h5><h5 id="FTP分析"><a href="#FTP分析" class="headerlink" title="FTP分析"></a>FTP分析</h5><h5 id="DHCP分析"><a href="#DHCP分析" class="headerlink" title="DHCP分析"></a>DHCP分析</h5><h4 id="实验八-综合组网实验"><a href="#实验八-综合组网实验" class="headerlink" title="实验八 综合组网实验"></a>实验八 综合组网实验</h4><h4 id="特别注意"><a href="#特别注意" class="headerlink" title="特别注意"></a>特别注意</h4><h5 id="1-什么时候用反掩码"><a href="#1-什么时候用反掩码" class="headerlink" title="1. 什么时候用反掩码"></a>1. 什么时候用反掩码</h5><ul>
<li><p>路由策略</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[R1-acl-2001]rule permit source 10.0.0.0 0.0.0.255</span><br></pre></td></tr></table></figure>
</li>
<li><p>OSPF路由注入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[S1-ospf-area-0.0.0.0] network 30.1.1.0 0.0.0.255</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="2-缺省路由"><a href="#2-缺省路由" class="headerlink" title="2. 缺省路由"></a>2. 缺省路由</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route-static 0.0.0.0 0.0.0.0 next-hop</span><br></pre></td></tr></table></figure>
<h5 id="3-OSPF常见路由注入方式"><a href="#3-OSPF常见路由注入方式" class="headerlink" title="3. OSPF常见路由注入方式"></a>3. OSPF常见路由注入方式</h5><ul>
<li>network ip地址 <strong>反掩码</strong> </li>
<li>import-route direct</li>
<li>import-route static</li>
</ul>
<h5 id="4-BGP常见路由注入方式"><a href="#4-BGP常见路由注入方式" class="headerlink" title="4. BGP常见路由注入方式"></a>4. BGP常见路由注入方式</h5><ul>
<li>network ip地址 <strong>掩码</strong> </li>
<li>import-route direct</li>
<li>import-route static</li>
</ul>
<h5 id="5-PPP协议启动"><a href="#5-PPP协议启动" class="headerlink" title="5. PPP协议启动"></a>5. PPP协议启动</h5><p>PPP协议配置后，需要先shutdown再undo来重新启动端口，使协议生效</p>
<h5 id="6-启动debug信息指令汇总"><a href="#6-启动debug信息指令汇总" class="headerlink" title="6. 启动debug信息指令汇总"></a>6. 启动debug信息指令汇总</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># ospf</span><br><span class="line">&lt;R1&gt;debugging ospf event</span><br><span class="line">&lt;R1&gt;dterminal debugging</span><br><span class="line"># bgp</span><br><span class="line">&lt;R1&gt;debug bgp event</span><br><span class="line">&lt;R1&gt;terminal debugging</span><br><span class="line"># ppp</span><br><span class="line">&lt;R1&gt;debugging ppp all &#x2F;&#x2F; 打开PPP的debug开关</span><br><span class="line">&lt;R1&gt;terminal debugging &#x2F;&#x2F; 显示debug信息</span><br><span class="line"># PAP</span><br><span class="line">&lt;R1&gt;debugging ppp pap all</span><br><span class="line">&lt;R1&gt;terminal debugging</span><br></pre></td></tr></table></figure>
<h5 id="7-网络实验常见问题解答"><a href="#7-网络实验常见问题解答" class="headerlink" title="7. 网络实验常见问题解答"></a>7. 网络实验常见问题解答</h5><ol>
<li><p>v5 和 v7 版本指令差异：</p>
<ul>
<li>访问控制列表配置：<ul>
<li>v5: acl number 2001</li>
<li>v7: acl basic 2001</li>
</ul>
</li>
<li>NAT地址转换：<ul>
<li>v5: nat address-group 1 192.168.5.105 192.168.5.109</li>
<li>v7: nat address-group 1; address 192.168.5.105 192.168.5.109</li>
</ul>
</li>
</ul>
</li>
<li><p>PC机无法抓到<code>IEEE802.3</code>格式报文</p>
<ul>
<li>在本地属性中选择安装<code>NWLink IPX/SPX/NETBIOS协议</code></li>
<li><code>IEEE802.3</code>是MAC帧结构的标准</li>
<li><code>IEEE802.1Q</code>是vlan tag</li>
</ul>
</li>
<li><p>接口不停up和down</p>
<ol>
<li>线缆接触不良</li>
<li>两个接口的有关协议自动协商不成功，需要将一方shutdown，配置完再undo</li>
</ol>
</li>
<li><p>quit和return命令</p>
<ol>
<li>quit：回到上一级视图</li>
<li>return：直接回到用户视图</li>
</ol>
</li>
<li><p>debugging信息停不下来</p>
<ol>
<li>使用快捷键<code>&lt;ctrl+O&gt;</code></li>
<li>输入若干次quit+回车</li>
</ol>
</li>
<li><p>PPP实验的Serial接口问题</p>
<ol>
<li>避免s2/0接口的干扰，先将其shutdown</li>
</ol>
</li>
<li><p>PAP认证问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#情况1</span><br><span class="line">[R1] local-user RTB class network</span><br><span class="line">[R10luser-network-RTB] service-type ppp</span><br><span class="line"></span><br><span class="line">#情况2</span><br><span class="line">[R2] local-user RTA</span><br><span class="line">[R2-luser-RTA]service-type ppp</span><br><span class="line">[P2-luser-RTA]password simple aaa</span><br></pre></td></tr></table></figure>
</li>
<li><p>请求失败</p>
<ol>
<li>以管理员身份运行</li>
</ol>
</li>
<li><p>tracert -d 避免DNS干扰</p>
</li>
<li><p>小心出厂配置干扰</p>
<p>[h3c]undo interface vlan 1</p>
</li>
<li><p>BGP上的v7指令</p>
<ol>
<li><p>BGP基本配置</p>
</li>
<li><p>查看BGP邻居状态</p>
<p>display bgp peer ipv4</p>
</li>
<li><p>查看BGP路由</p>
<p>display bgp routing-table ipv4</p>
</li>
<li><p>路由聚合</p>
</li>
</ol>
</li>
<li><p>BGP default med命令不生效</p>
<p>采用路由策略配置：</p>
<p><img src="计网实验复习笔记.asset/image-20240520145845941.png" alt="image-20240520145845941"></p>
</li>
<li><p>TCP的seq number都是相对序号</p>
<p><code>wireshark, edit-&gt;preference-&gt;tcp-&gt;取消勾选relative seq number</code></p>
</li>
<li><p>TCP捎带确认</p>
<p>四次握手会合并为三次</p>
</li>
</ol>


        <hr />
        <!-- Pager -->
        <ul class="pager">
          
          <li class="previous">
            <a
              href="/2024/06/15/前端学习路线/"
              data-toggle="tooltip"
              data-placement="top"
              title="前端学习路线"
              >&larr; Previous Post</a
            >
          </li>
           
          <li class="next">
            <a
              href="/2024/06/11/软工LOG笔记/"
              data-toggle="tooltip"
              data-placement="top"
              title="[BUAA Software Engineering] Notes"
              >Next Post &rarr;</a
            >
          </li>
          
        </ul>

        <!-- tip start -->
         
        <div class="comment_notes">
          <p>This is copyright.</p>
        </div>
        
        <!-- tip end -->

        <!-- Music start-->
        
        <!-- Music end -->

        <!-- Sharing -->
        
        <div
          class="social-share"
          data-wechat-qrcode-helper=""
          align="center"
        ></div>
        <!--  css & js -->
        <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css"
        />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
        
        <!-- Sharing -->

        <!-- gitment start -->
        
        <!-- gitment end -->

        <!-- 来必力City版安装代码 -->
        
        <!-- City版安装代码已完成 -->

        <!-- disqus comment start -->
        
        <!-- disqus comment end -->

        <!-- waline comment start -->
        
        <!-- waline comment end -->
      </div>

      <!-- Tabe of Content -->
      <!-- Table of Contents -->

    
      
        <aside id="sidebar">
          <div id="toc" class="toc-article">
          <strong class="toc-title">Contents</strong>
          
            
              <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#实验一-网络实验入门"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">实验一 网络实验入门</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#交换机和路由器简介"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">交换机和路由器简介</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#交换机和路由器的基本配置"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">交换机和路由器的基本配置</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#地址转换NAT"><span class="toc-nav-number">1.3.</span> <span class="toc-nav-text">地址转换NAT</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#实验二-数据链路层实验"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">实验二 数据链路层实验</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#以太网链路层帧格式分析"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">以太网链路层帧格式分析</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#交换机的MAC地址表和端口聚合"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text">交换机的MAC地址表和端口聚合</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#VLAN的配置与分析"><span class="toc-nav-number">2.3.</span> <span class="toc-nav-text">VLAN的配置与分析</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#广域网数据链路层协议"><span class="toc-nav-number">2.4.</span> <span class="toc-nav-text">广域网数据链路层协议</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#实验三-网络层实验"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">实验三 网络层实验</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#ARP分析"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">ARP分析</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#ICMP分析"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">ICMP分析</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#IP分析"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">IP分析</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#网络层分片实验"><span class="toc-nav-number">3.4.</span> <span class="toc-nav-text">网络层分片实验</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#VLAN间通信"><span class="toc-nav-number">3.5.</span> <span class="toc-nav-text">VLAN间通信</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#实验四-RIP协议实验"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">实验四 RIP协议实验</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#实验五-OSPF协议分析"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">实验五 OSPF协议分析</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#OSPF协议概述及基本配置"><span class="toc-nav-number">5.1.</span> <span class="toc-nav-text">OSPF协议概述及基本配置</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#OSPF协议报文交互过程"><span class="toc-nav-number">5.2.</span> <span class="toc-nav-text">OSPF协议报文交互过程</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#OSPF协议链路状态描述"><span class="toc-nav-number">5.3.</span> <span class="toc-nav-text">OSPF协议链路状态描述</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#区域划分及LSA种类"><span class="toc-nav-number">5.4.</span> <span class="toc-nav-text">区域划分及LSA种类</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#OSPF协议路由的计算"><span class="toc-nav-number">5.5.</span> <span class="toc-nav-text">OSPF协议路由的计算</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#实验要点"><span class="toc-nav-number">5.6.</span> <span class="toc-nav-text">实验要点</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#实验六-BGP协议实验"><span class="toc-nav-number">6.</span> <span class="toc-nav-text">实验六 BGP协议实验</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#BGP的基本分析"><span class="toc-nav-number">6.1.</span> <span class="toc-nav-text">BGP的基本分析</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#BGP状态机的分析"><span class="toc-nav-number">6.2.</span> <span class="toc-nav-text">BGP状态机的分析</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#BGP的路由聚合"><span class="toc-nav-number">6.3.</span> <span class="toc-nav-text">BGP的路由聚合</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#BGP的基本路由属性分析"><span class="toc-nav-number">6.4.</span> <span class="toc-nav-text">BGP的基本路由属性分析</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#BGP的路由策略"><span class="toc-nav-number">6.5.</span> <span class="toc-nav-text">BGP的路由策略</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#BGP的同步机制"><span class="toc-nav-number">6.6.</span> <span class="toc-nav-text">BGP的同步机制</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#实验七-传输层实验"><span class="toc-nav-number">7.</span> <span class="toc-nav-text">实验七 传输层实验</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#TCP基本分析"><span class="toc-nav-number">7.1.</span> <span class="toc-nav-text">TCP基本分析</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#TCP的拥塞控制"><span class="toc-nav-number">7.2.</span> <span class="toc-nav-text">TCP的拥塞控制</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#UDP分析"><span class="toc-nav-number">7.3.</span> <span class="toc-nav-text">UDP分析</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#实验七-应用层实验"><span class="toc-nav-number">8.</span> <span class="toc-nav-text">实验七 应用层实验</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#DNS协议分析"><span class="toc-nav-number">8.1.</span> <span class="toc-nav-text">DNS协议分析</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#HTTP分析"><span class="toc-nav-number">8.2.</span> <span class="toc-nav-text">HTTP分析</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#SMTP分析"><span class="toc-nav-number">8.3.</span> <span class="toc-nav-text">SMTP分析</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#FTP分析"><span class="toc-nav-number">8.4.</span> <span class="toc-nav-text">FTP分析</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#DHCP分析"><span class="toc-nav-number">8.5.</span> <span class="toc-nav-text">DHCP分析</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#实验八-综合组网实验"><span class="toc-nav-number">9.</span> <span class="toc-nav-text">实验八 综合组网实验</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#特别注意"><span class="toc-nav-number">10.</span> <span class="toc-nav-text">特别注意</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#1-什么时候用反掩码"><span class="toc-nav-number">10.1.</span> <span class="toc-nav-text">1. 什么时候用反掩码</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#2-缺省路由"><span class="toc-nav-number">10.2.</span> <span class="toc-nav-text">2. 缺省路由</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#3-OSPF常见路由注入方式"><span class="toc-nav-number">10.3.</span> <span class="toc-nav-text">3. OSPF常见路由注入方式</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#4-BGP常见路由注入方式"><span class="toc-nav-number">10.4.</span> <span class="toc-nav-text">4. BGP常见路由注入方式</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#5-PPP协议启动"><span class="toc-nav-number">10.5.</span> <span class="toc-nav-text">5. PPP协议启动</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#6-启动debug信息指令汇总"><span class="toc-nav-number">10.6.</span> <span class="toc-nav-text">6. 启动debug信息指令汇总</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#7-网络实验常见问题解答"><span class="toc-nav-number">10.7.</span> <span class="toc-nav-text">7. 网络实验常见问题解答</span></a></li></ol></li></ol>
            
          
          </div>
        </aside>
      
    


      <!-- Sidebar Container -->
      <div
        class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 sidebar-container"
      >
        <!-- Featured Tags -->
        
        <section>
          <!-- no hr -->
          <h5><a href="/tags/">FEATURED TAGS</a></h5>
          <div class="tags">
            
            <a
              class="tag"
              href="/tags/#计算机网络"
              title="计算机网络"
              >计算机网络</a
            >
            
          </div>
        </section>
        

        <!-- Friends Blog -->
        
        <hr />
        <h5>FRIENDS</h5>
        <ul class="list-inline">
          
          <li>
            <a href="https://blog.csdn.net/d_Nail" target="_blank">Dusign&#39;s Blog</a>
          </li>
          
          <li>
            <a href="#" target="_blank">Dusign&#39;s Web</a>
          </li>
          
          <li>
            <a href="https://github.com/dusign" target="_blank">Dusign&#39;s Github</a>
          </li>
          
          <li>
            <a href="#" target="_blank">Other</a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</article>

 
<!-- async load function -->
<script>
  function async(u, c) {
    var d = document,
      t = "script",
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener(
        "load",
        function (e) {
          c(null, e);
        },
        false
      );
    }
    s.parentNode.insertBefore(o, s);
  }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
  async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js", function () {
    anchors.options = {
      visible: "hover",
      placement: "left",
      icon: "ℬ",
    };
    anchors
      .add()
      .remove(".intro-header h1")
      .remove(".subheading")
      .remove(".sidebar-container h5");
  });
</script>

<style type="text/css">
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">

                
                    <li>
                        <a target="_blank"  href="https://github.com/xoioiiox">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://twitter.com/dusignr">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://www.facebook.com/Gang Du">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/dusignr">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">知</i>
                            </span>
                        </a>
                    </li>
                

                

                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; xoioiiox 2024 
                    <br>
                    Powered by 
                    <a href="https://github.com/xoioiiox" target="_blank" rel="noopener">
                        <i>xoioiiox</i>
                    </a> | 
                    <iframe name="star" style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0"
                        width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=dusign&repo=hexo-theme-snail&type=star&count=true">
                    </iframe>
                </p>
            </div>
        </div>
    </div>

</footer>

<!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- Bootstrap Core JavaScript -->

<script src="/js/bootstrap.min.js"></script>


<!-- Custom Theme JavaScript -->

<script src="/js/hux-blog.min.js"></script>


<!-- Search -->

<script src="/js/search.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://xoioiiox.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-XXXXXXXX-X';
    var _gaDomain = 'yoursite';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->


<!-- Search -->

    <script type="text/javascript">      
        var search_path = "search.xml";
        if (search_path.length == 0) {
            search_path = "search.xml";
        }
    var path = "/" + search_path;
    searchFunc(path, 'local-search-input', 'local-search-result');
    </script>


<!-- busuanzi -->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>

    
        <!-- background effects line -->
        

        
            <script type="text/javascript" src="/js/mouse-click.js" content='[&#34;❤️&#34;,&#34;🥥&#34;,&#34;🍅&#34;,&#34;🧀&#34;,&#34;🍨&#34;,&#34;🍇&#34;,&#34;🍩&#34;]' color='[&#34;rgb(121,93,179)&#34; ,&#34;rgb(76,180,231)&#34; ,&#34;rgb(184,90,154)&#34;]'></script>
        

        <!-- background effects end -->
    

    <!--<script size="50" alpha='0.3' zIndex="-999" src="/js/ribbonStatic.js"></script>-->
    
        <script src="/js/ribbonDynamic.js"></script>
    
</body>

</html>
